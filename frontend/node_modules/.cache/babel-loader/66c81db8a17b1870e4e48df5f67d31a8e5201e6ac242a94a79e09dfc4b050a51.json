{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport router from './router';\nimport { routers } from './router/routers';\nconst loginRoutePath = '/login';\nconst registerRoutePath = '/register';\nconst defaultRoutePath = '/transactions';\n// Permission control\nrouter.beforeEach((to, _from, next) => {\n  let userId = localStorage.getItem('userId');\n  if (userId) {\n    if (to.path === loginRoutePath) {\n      next(defaultRoutePath);\n    } else {\n      const fIndex = routers.find(f => f.name === 'Layout').children.findIndex(f => f.path === to.path);\n      if (to.path == '/404') {\n        next();\n      } else if (fIndex === -1 && to.path !== '/') {\n        next('/404');\n      } else {\n        next();\n      }\n    }\n  } else {\n    if (to.path === loginRoutePath || to.path === registerRoutePath) {\n      next();\n    } else {\n      next(loginRoutePath);\n    }\n  }\n});","map":{"version":3,"names":["router","routers","loginRoutePath","registerRoutePath","defaultRoutePath","beforeEach","to","_from","next","userId","localStorage","getItem","path","fIndex","find","f","name","children","findIndex"],"sources":["C:/Users/gitCode/FinanceWithMe/frontend/src/permission.js"],"sourcesContent":["import router from './router'\r\nimport { routers } from './router/routers'\r\n\r\nconst loginRoutePath = '/login'\r\nconst registerRoutePath = '/register'\r\nconst defaultRoutePath = '/transactions'\r\n// Permission control\r\nrouter.beforeEach((to, _from, next) => {\r\n  let userId = localStorage.getItem('userId')\r\n  if (userId) {\r\n    if (to.path === loginRoutePath) {\r\n      next(defaultRoutePath)\r\n    } else {\r\n      const fIndex = routers.find(f => f.name === 'Layout').children.findIndex(f => f.path === to.path)\r\n      if (to.path == '/404') {\r\n        next()\r\n      } else if (fIndex === -1 && to.path !== '/') {\r\n        next('/404')\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    if (to.path === loginRoutePath || to.path === registerRoutePath) {\r\n      next()\r\n    } else {\r\n      next(loginRoutePath)\r\n    }\r\n  }\r\n})\r\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,SAASC,OAAO,QAAQ,kBAAkB;AAE1C,MAAMC,cAAc,GAAG,QAAQ;AAC/B,MAAMC,iBAAiB,GAAG,WAAW;AACrC,MAAMC,gBAAgB,GAAG,eAAe;AACxC;AACAJ,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,KAAK,EAAEC,IAAI,KAAK;EACrC,IAAIC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EAC3C,IAAIF,MAAM,EAAE;IACV,IAAIH,EAAE,CAACM,IAAI,KAAKV,cAAc,EAAE;MAC9BM,IAAI,CAACJ,gBAAgB,CAAC;IACxB,CAAC,MAAM;MACL,MAAMS,MAAM,GAAGZ,OAAO,CAACa,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,QAAQ,CAAC,CAACC,QAAQ,CAACC,SAAS,CAACH,CAAC,IAAIA,CAAC,CAACH,IAAI,KAAKN,EAAE,CAACM,IAAI,CAAC;MACjG,IAAIN,EAAE,CAACM,IAAI,IAAI,MAAM,EAAE;QACrBJ,IAAI,CAAC,CAAC;MACR,CAAC,MAAM,IAAIK,MAAM,KAAK,CAAC,CAAC,IAAIP,EAAE,CAACM,IAAI,KAAK,GAAG,EAAE;QAC3CJ,IAAI,CAAC,MAAM,CAAC;MACd,CAAC,MAAM;QACLA,IAAI,CAAC,CAAC;MACR;IACF;EACF,CAAC,MAAM;IACL,IAAIF,EAAE,CAACM,IAAI,KAAKV,cAAc,IAAII,EAAE,CAACM,IAAI,KAAKT,iBAAiB,EAAE;MAC/DK,IAAI,CAAC,CAAC;IACR,CAAC,MAAM;MACLA,IAAI,CAACN,cAAc,CAAC;IACtB;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}