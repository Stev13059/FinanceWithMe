"use strict";(self["webpackChunkfinance_with_me"]=self["webpackChunkfinance_with_me"]||[]).push([[824],{38824:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});a(98992),a(72577);var n=function(){var e=this,t=e._self._c;return t("div",[t("TabBtn",{attrs:{tabData:e.tabGroupData},on:{changeTab:e.changeGroup}}),t("Summary",{attrs:{balance:e.balance,incomes:e.incomes,expenses:e.expenses}}),t("div",{staticClass:"editBtn"},[t("div",{staticClass:"left"},[t("TabBtn",{attrs:{tabData:e.tabTypeData},on:{changeTab:e.changeType}})],1),e.tabGroupData.find((e=>e.selected)).id?e._e():t("a-button",{staticStyle:{width:"90px"},attrs:{type:"primary",size:"large"},on:{click:e.modalAdddata}},[e._v(" Add ")])],1),t("a-table",{attrs:{loading:e.loading,"data-source":e.data,columns:e.columns,rowKey:(e,t)=>t,pagination:e.pagination},on:{change:e.changePage},scopedSlots:e._u([{key:"Operation",fn:function(a,n,s){return t("span",{},[t("a-popconfirm",{attrs:{title:"Are you sure delete this data?"},on:{confirm:function(t){return e.deleteDate(a)}}},[t("a-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.tabGroupData.find((e=>e.selected)).id||a.goalId,type:"danger",loading:e.delLoading}},[e._v("Delete")])],1),t("a-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.tabGroupData.find((e=>e.selected)).id||a.goalId},on:{click:function(t){return e.onEdit(a)}}},[e._v("Edit")])],1)}}])}),t("Modal",{ref:"Modal",on:{submitOK:e.getData}})],1)},s=[],i=(a(54520),a(3949),a(81454),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"summary_header"},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("img",{staticStyle:{width:"30px","padding-right":"6px","object-fit":"contain"},attrs:{src:a(46493)}}),t("span",[e._v("Balance： "+e._s(e.balance))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("img",{staticStyle:{width:"30px","padding-right":"6px","object-fit":"contain"},attrs:{src:a(95360)}}),t("span",[e._v("Total Incomes： "+e._s(e.incomes))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("img",{staticStyle:{width:"30px","padding-right":"6px","object-fit":"contain"},attrs:{src:a(95360)}}),t("span",[e._v("Total Expenses： "+e._s(e.expenses))])])])])}),r=[],o={name:"Summary",props:["balance","expenses","incomes"]},l=o,d=a(81656),c=(0,d.A)(l,i,r,!1,null,"5f0822ee",null),u=c.exports,m=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:1==e.formData.transactionType?"Income":"Expense",confirmLoading:e.btnLoading},on:{ok:e.onSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:18}},on:{submit:e.handleSubmit}},[2==e.formData.transactionType?t("a-form-item",{attrs:{label:"Type"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.type[0].name,rules:[{required:!0,message:"Please select your gender!"}]}],expression:"['type', { initialValue: type[0].name, rules: [{ required: true, message: 'Please select your gender!' }] },]"}],staticStyle:{width:"120px"}},e._l(e.type,(function(a){return t("a-select-option",{key:a.name,attrs:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])})),1)],1):e._e(),t("a-form-item",{attrs:{label:"Details"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"Please input your details!"}]}],expression:"['name', { rules: [{ required: true, message: 'Please input your details!' }] }]"}],attrs:{placeholder:"Please enter Details"}})],1),t("a-form-item",{attrs:{label:"Amount"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",{rules:[{required:!0,message:"Please input your amount!"}]}],expression:"['amount', { rules: [{ required: true, message: 'Please input your amount!' }] }]"}],attrs:{placeholder:"Please enter Amount",type:"number"}})],1)],1)],1)],1)},p=[],h=a(6698),g={name:"Modal",data(){return{visible:!1,btnLoading:!1,form:this.$form.createForm(this,{name:"coordinated"}),formData:{},type:[{name:"Food"},{name:"Transport"},{name:"Healthcare"},{name:"Education"},{name:"Shopping"},{name:"Entertainment"},{name:"Bill"},{name:"Other"}]}},methods:{handleSubmit(){let e;return this.form.validateFields(((t,a)=>{t||(e=a)})),e},onSubmit(){let e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear(),s=`${t}/${a}/${n}`;const i=this.handleSubmit();i&&(this.btnLoading=!0,this.formData.id?(0,h.OK)({...this.formData,...i,date:s}).then((()=>{this.visible=!1,this.$message.success("Edited successfully"),this.$emit("submitOK")})).finally((()=>{this.btnLoading=!1})):(0,h.Nz)({...this.formData,...i,date:s}).then((()=>{this.visible=!1,this.$message.success("Added successfully"),this.$emit("submitOK")})).finally((()=>{this.btnLoading=!1})))}},mounted(){}},f=g,b=(0,d.A)(f,m,p,!1,null,"029245bb",null),y=b.exports;const T=[{title:"Details",dataIndex:"name",align:"center"},{title:"Amount(£)",dataIndex:"amount",align:"center"},{title:"Date",dataIndex:"date",align:"center"},{title:"Operation",scopedSlots:{customRender:"Operation"},align:"center"}],x=[{title:"Type",dataIndex:"type",align:"center"},{title:"Details",dataIndex:"name",align:"center"},{title:"Amount(£)",dataIndex:"amount",align:"center"},{title:"Date",dataIndex:"date",align:"center"},{title:"Operation",scopedSlots:{customRender:"Operation"},align:"center"}];var v={name:"TransactionsPage",data(){return{loading:!1,delLoading:!1,columns:T,data:[],balance:0,incomes:0,expenses:0,pagination:{total:0,current:1,pageSizeOptions:["10","20","30","50"],showTotal:e=>`total ${e}`,pageSize:10,showSizeChanger:!0},tabGroupData:[],tabTypeData:[{id:1,name:"Income",selected:!0},{id:2,name:"Expense",selected:!1}]}},components:{Summary:u,Modal:y},methods:{getGroupData(){(0,h.Qs)().then((e=>{this.tabGroupData=[{id:"",name:"Personal",selected:!0},...e.data.map((e=>({id:e.id,name:e.groupName,selected:!1})))],this.getData()}))},changeGroup(e){this.tabGroupData.forEach((t=>{t.selected=e.id===t.id})),this.getData()},changeType(e){this.tabTypeData.forEach((t=>{t.selected=e.id===t.id})),this.columns=1===e.id?T:x,this.getData()},changePage(e){Object.assign(this.pagination,e)},modalAdddata(){this.$refs.Modal.visible=!0,this.$refs.Modal.form.resetFields(),this.$refs.Modal.formData={groupId:this.tabGroupData.find((e=>e.selected)).id,transactionType:this.tabTypeData.find((e=>e.selected)).id},console.log(this.$refs.Modal.formData)},getData(){this.loading=!0;const e={},t=this.tabGroupData.find((e=>e.selected)).id;t&&(e.groupId=t),(0,h.aM)(e).then((e=>{this.balance=e.balance,this.incomes=e.incomes,this.expenses=e.expenses;const t=e.data.infos;this.data=t.filter((e=>e.transactionType==this.tabTypeData.find((e=>e.selected)).id))})).finally((()=>{this.loading=!1}))},onEdit(e){this.$refs.Modal.visible=!0,Object.assign(this.$refs.Modal.formData,{...e}),this.$nextTick((()=>{this.$refs.Modal.form.setFieldsValue(this.$refs.Modal.formData)}))},deleteDate(e){this.delLoading=!0,(0,h.BZ)({id:e.id}).then((()=>{this.$message.success("Deleted successfully"),this.getData()})).finally((()=>{this.delLoading=!1}))}},mounted(){this.getGroupData()}},D=v,S=(0,d.A)(D,n,s,!1,null,"16dd04b0",null),O=S.exports},6698:function(e,t,a){a.d(t,{vs:function(){return $},m5:function(){return P},Gh:function(){return O},$3:function(){return D},sE:function(){return v},dq:function(){return x},qx:function(){return S},Qs:function(){return y},J6:function(){return T},Gq:function(){return l},GP:function(){return d},Js:function(){return b},fL:function(){return f},yX:function(){return g},c_:function(){return h},Nz:function(){return u},BZ:function(){return p},OK:function(){return m},aM:function(){return c}});a(81454);var n=a(25257);const s={headers:{"Content-Type":"application/json;charset=utf-8"},baseURL:"https://financewithme.azurewebsites.net/api",code:"WePrywqwpoUEGrZA0UTEUvfqibt8H0QmOhBDmHzVbySFAzFu4V2R3w=="},i=e=>(e.response&&n.A.error(e.response.statusText||"The server is busy, please try again later."),e.statusText&&n.A.error(e.statusText||"The server is busy, please try again later."),Promise.reject(e)),r=e=>{const t={...e};if(t.url=`${s.baseURL}${e.url}`,-1==t.url.indexOf("/user/login")&&-1==t.url.indexOf("/user/register")){const t=localStorage.getItem("userId");t&&(e.params?Object.assign(e.params,{userId:t}):e.params={userId:t})}return e.params&&("GET"===e.method.toUpperCase()?t.url=`${t.url}?${Object.keys(e.params).map((t=>`${t}=${e.params[t]}`)).join("&")}`:"POST"===e.method.toUpperCase()&&(t.body=JSON.stringify(e.params)),delete t.params),t.url=t.url.indexOf("?")>-1?`${t.url}&code=${s.code}`:`${t.url}?code=${s.code}`,t},o=async(e,t={})=>{const a=r({...s,...t,url:e}),o=await fetch(a.url,{...a});if(o.ok){const e=await o.json();return e.result||0==e.code?Promise.resolve(e):(n.A.error(e.msg||"error"),Promise.reject())}return await i(o)},l=(e,t)=>o("/user/login",{method:"GET",params:e,...t}),d=(e,t)=>o("/user/register",{method:"POST",params:e,...t}),c=(e,t)=>o("/transaction/list",{method:"GET",params:e,...t}),u=(e,t)=>o("/transaction/add",{method:"POST",params:e,...t}),m=(e,t)=>o("/transaction/edit",{method:"POST",params:e,...t}),p=(e,t)=>o("/transaction/delete",{method:"POST",params:e,...t}),h=(e,t)=>o("/goals/list",{method:"GET",params:e,...t}),g=(e,t)=>o("/goals/edit",{method:"POST",params:e,...t}),f=(e,t)=>o("/goals/delete",{method:"POST",params:e,...t}),b=(e,t)=>o("/goals/add",{method:"POST",params:e,...t}),y=(e,t)=>o("/group/list",{method:"GET",params:e,...t}),T=(e,t)=>o("/group/userList",{method:"GET",params:e,...t}),x=(e,t)=>o("/group/disband",{method:"POST",params:e,...t}),v=(e,t)=>o("/group/addUser",{method:"POST",params:e,...t}),D=(e,t)=>o("/group/add",{method:"POST",params:e,...t}),S=(e,t)=>o("/group/exit",{method:"POST",params:e,...t}),O=(e,t)=>o("/analytics/total",{method:"GET",params:e,...t}),$=(e,t)=>o("/analytics/exchangeRate",{method:"GET",params:e,...t}),P=(e,t)=>o("/analytics/proportion",{method:"get",params:e,...t})},95360:function(e,t,a){e.exports=a.p+"img/WechatIMG1414.911935b7.jpg"},46493:function(e,t,a){e.exports=a.p+"img/WechatIMG1415.c0ff1f92.jpg"}}]);
//# sourceMappingURL=824.e4264446.js.map