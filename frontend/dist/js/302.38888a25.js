"use strict";(self["webpackChunkfinance_with_me"]=self["webpackChunkfinance_with_me"]||[]).push([[302],{43302:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","flex-direction":"column"}},[t("TabBtn",{attrs:{tabData:e.tabGroupData},on:{changeTab:e.changeTab}}),t("a-button",{staticStyle:{"align-self":"flex-end",margin:"20px"},attrs:{icon:"plus",size:"large",type:"primary"},on:{click:e.addOpenModal}},[e._v("Create")]),0===e.goalsList.length?t("a-empty"):e._e(),t("div",{staticClass:"cardBox"},e._l(e.goalsList,(function(a,r){return t("a-card",{key:r},[t("div",{staticClass:"card_header"},[t("a-icon",{attrs:{type:e.typeIcon[a.type]}}),t("span",[e._v(e._s(a.goalName))]),t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"plus-circle"},on:{click:function(t){e.visible=!0,e.currentAmountIndex=r}}})],1),t("div",{staticClass:"card_date"},[t("div",{staticClass:"money_date"},[t("div",[e._v(e._s(a.targetAmount)+" £")]),t("div",[e._v(e._s(a.currentAmount)+" £")])]),t("div",{staticStyle:{"padding-right":"10px"}},[t("a-progress",{attrs:{percent:a.progressPercentage}})],1)]),t("div",{staticClass:"card_btn"},[t("a-button",{attrs:{size:"large"},on:{click:function(t){return e.onEditGoals(a,r)}}},[e._v("Edit")]),t("a-button",{attrs:{type:"danger",loading:e.delLoading&&e.delId==a.id,size:"large"},on:{click:function(t){return e.onDelete(a.id)}}},[e._v("Delete")])],1)])})),1),t("a-modal",{attrs:{title:"Current Amount"},on:{ok:e.addCurrentAmount,close:e.onClose},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{attrs:{form:e.form,"label-col":{span:6},"wrapper-col":{span:18}}},[t("a-form-item",{attrs:{label:"Deposit"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentAmount",{rules:[{required:!0,message:"Please input your currentAmount!"}]}],expression:"['currentAmount', { rules: [{ required: true, message: 'Please input your currentAmount!' }] }]"}],attrs:{placeholder:"",type:"number"}})],1)],1)],1),t("Modal",{ref:"drawerRef",on:{addGoals:e.addGoals,editGoals:e.editGoals}})],1)},s=[],n=(a(98992),a(72577),a(3949),a(81454),a(6698)),o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"Create a Saving Goal",width:520},on:{cancel:e.onClose},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",[t("a-form",{attrs:{form:e.form,"label-col":{span:6},"wrapper-col":{span:18}}},[t("a-form-item",{attrs:{label:"GoalName"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goalName",{rules:[{required:!0,message:"Please input your goalName!"}]}],expression:"['goalName', { rules: [{ required: true, message: 'Please input your goalName!' }] }]"}],attrs:{placeholder:"Please enter goalName"}})],1),t("a-form-item",{attrs:{label:"TargetAmount"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["targetAmount",{rules:[{required:!0,message:"Please input your targetAmount!"}]}],expression:"['targetAmount', { rules: [{ required: true, message: 'Please input your targetAmount!' }] }]"}],attrs:{placeholder:"Please enter targetAmount",type:"number"}})],1),t("a-form-item",{attrs:{label:"Type"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.type[0].name,rules:[{required:!0,message:"Please select your gender!"}]}],expression:"['type', { initialValue: type[0].name, rules: [{ required: true, message: 'Please select your gender!' }] },]"}],staticStyle:{width:"120px"}},e._l(e.type,(function(a){return t("a-select-option",{key:a.name,attrs:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("div",{staticClass:"footerBtn"},[t("a-button",{on:{click:e.onClose}},[e._v("Cancel")]),t("a-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.onSubmit}},[e._v("Submit")])],1)],1)])],1)},i=[],l={name:"Modal",data(){return{visible:!1,btnLoading:!1,type:[{name:"Food"},{name:"Transport"},{name:"Healthcare"},{name:"Education"},{name:"Shopping"},{name:"Entertainment"},{name:"Bill"},{name:"Other"}],form:this.$form.createForm(this,{name:"coordinated"}),formData:{}}},methods:{onSubmit(){this.form.validateFields(((e,t)=>{e||(this.formData.id?this.$emit("editGoals",{...t,id:this.formData.id}):this.$emit("addGoals",{...t}))}))},onClose(){console.log("close"),this.visible=!1,this.form.resetFields(),this.formData={}}}},u=l,d=a(81656),c=(0,d.A)(u,o,i,!1,null,"34f22a63",null),m=c.exports,p={name:"GoalsPage",components:{Modal:m},data(){return{delId:-1,delLoading:!1,goalsList:[],currentAmountIndex:0,tabGroupData:[],visible:!1,form:this.$form.createForm(this,{name:"coordinated"}),typeIcon:{Food:"coffee",Transport:"car",Healthcare:"medicine-box",Education:"read",Shopping:"shopping-cart",Entertainment:"customer-service",Bill:"transaction",Other:"gateway"}}},methods:{getGroupData(){(0,n.Qs)().then((e=>{this.tabGroupData=[{id:"",name:"Personal",selected:!0},...e.data.map((e=>({id:e.id,name:e.groupName,selected:!1})))],this.getDataList()}))},changeTab(e){this.tabGroupData.forEach((t=>{t.selected=e.id===t.id})),this.getDataList()},getDataList(){const e={},t=this.tabGroupData.find((e=>e.selected)).id;t&&(e.groupId=t),(0,n.c_)(e).then((e=>{this.goalsList=e.data.map((e=>({...e,progressPercentage:parseFloat(parseFloat(e.currentAmount/e.targetAmount*100).toFixed(2))})))}))},addGoals(e){this.$refs.drawerRef.btnLoading=!0,(0,n.Js)({...e,currentAmount:0,groupId:this.tabGroupData.find((e=>e.selected)).id}).then((()=>{this.$message.success("Adding savinggoals for success！"),this.$refs.drawerRef.visible=!1,this.$refs.drawerRef.form.resetFields(),this.getDataList()})).finally((()=>{this.$refs.drawerRef.btnLoading=!1}))},editGoals(e){this.$refs.drawerRef.btnLoading=!0,(0,n.yX)({...e,currentAmount:this.goalsList[this.currentAmountIndex].currentAmount}).then((()=>{this.$message.success("Editing savinggoals for success！"),this.$refs.drawerRef.visible=!1,this.$refs.drawerRef.form.resetFields(),this.getDataList()})).finally((()=>{this.$refs.drawerRef.btnLoading=!1}))},onEditGoals(e,t){this.currentAmountIndex=t,this.$refs.drawerRef.visible=!0,Object.assign(this.$refs.drawerRef.formData,JSON.parse(JSON.stringify(e))),this.$nextTick((()=>{this.$refs.drawerRef.form.setFieldsValue(this.$refs.drawerRef.formData)}))},addOpenModal(){this.$refs.drawerRef.visible=!0},onDelete(e){this.$confirm({title:"Do you want to delete this goals?",content:"Cannot be restored after deletion",onOk:()=>{this.delLoading=!0,this.delId=e,(0,n.fL)({id:e}).then((()=>{this.$message.success("Deleting savinggoals for success！"),this.getDataList()})).finally((()=>{this.delLoading=!1}))},onCancel(){}})},addCurrentAmount(){this.form.validateFields(((e,t)=>{if(!e){const e=this.goalsList[this.currentAmountIndex],a={...e,currentAmount:parseFloat(e.currentAmount)+parseFloat(t.currentAmount)};(0,n.yX)(a).then((()=>{this.$message.success("Add amount success！"),this.getDataList(),this.visible=!1,this.form.resetFields();let a=new Date,r=a.getDate(),s=a.getMonth()+1,o=a.getFullYear(),i=`${r}/${s}/${o}`;(0,n.Nz)({date:i,type:e.type,name:e.goalName,amount:parseFloat(t.currentAmount),groupId:e.groupId,transactionType:2,goalId:e.id})})).finally((()=>{}))}}))},onClose(){this.visible=!1,this.form.resetFields()}},mounted(){this.getGroupData()}},f=p,g=(0,d.A)(f,r,s,!1,null,"3a0c2828",null),h=g.exports},6698:function(e,t,a){a.d(t,{vs:function(){return x},m5:function(){return D},Gh:function(){return G},$3:function(){return T},sE:function(){return w},dq:function(){return A},qx:function(){return $},Qs:function(){return v},J6:function(){return y},Gq:function(){return l},GP:function(){return u},Js:function(){return b},fL:function(){return h},yX:function(){return g},c_:function(){return f},Nz:function(){return c},BZ:function(){return p},OK:function(){return m},aM:function(){return d}});a(81454);var r=a(25257);const s={headers:{"Content-Type":"application/json;charset=utf-8"},baseURL:"https://financewithme.azurewebsites.net/api",code:"WePrywqwpoUEGrZA0UTEUvfqibt8H0QmOhBDmHzVbySFAzFu4V2R3w=="},n=e=>(e.response&&r.A.error(e.response.statusText||"The server is busy, please try again later."),e.statusText&&r.A.error(e.statusText||"The server is busy, please try again later."),Promise.reject(e)),o=e=>{const t={...e};if(t.url=`${s.baseURL}${e.url}`,-1==t.url.indexOf("/user/login")&&-1==t.url.indexOf("/user/register")){const t=localStorage.getItem("userId");t&&(e.params?Object.assign(e.params,{userId:t}):e.params={userId:t})}return e.params&&("GET"===e.method.toUpperCase()?t.url=`${t.url}?${Object.keys(e.params).map((t=>`${t}=${e.params[t]}`)).join("&")}`:"POST"===e.method.toUpperCase()&&(t.body=JSON.stringify(e.params)),delete t.params),t.url=t.url.indexOf("?")>-1?`${t.url}&code=${s.code}`:`${t.url}?code=${s.code}`,t},i=async(e,t={})=>{const a=o({...s,...t,url:e}),i=await fetch(a.url,{...a});if(i.ok){const e=await i.json();return e.result||0==e.code?Promise.resolve(e):(r.A.error(e.msg||"error"),Promise.reject())}return await n(i)},l=(e,t)=>i("/user/login",{method:"GET",params:e,...t}),u=(e,t)=>i("/user/register",{method:"POST",params:e,...t}),d=(e,t)=>i("/transaction/list",{method:"GET",params:e,...t}),c=(e,t)=>i("/transaction/add",{method:"POST",params:e,...t}),m=(e,t)=>i("/transaction/edit",{method:"POST",params:e,...t}),p=(e,t)=>i("/transaction/delete",{method:"POST",params:e,...t}),f=(e,t)=>i("/goals/list",{method:"GET",params:e,...t}),g=(e,t)=>i("/goals/edit",{method:"POST",params:e,...t}),h=(e,t)=>i("/goals/delete",{method:"POST",params:e,...t}),b=(e,t)=>i("/goals/add",{method:"POST",params:e,...t}),v=(e,t)=>i("/group/list",{method:"GET",params:e,...t}),y=(e,t)=>i("/group/userList",{method:"GET",params:e,...t}),A=(e,t)=>i("/group/disband",{method:"POST",params:e,...t}),w=(e,t)=>i("/group/addUser",{method:"POST",params:e,...t}),T=(e,t)=>i("/group/add",{method:"POST",params:e,...t}),$=(e,t)=>i("/group/exit",{method:"POST",params:e,...t}),G=(e,t)=>i("/analytics/total",{method:"GET",params:e,...t}),x=(e,t)=>i("/analytics/exchangeRate",{method:"GET",params:e,...t}),D=(e,t)=>i("/analytics/proportion",{method:"get",params:e,...t})}}]);
//# sourceMappingURL=302.38888a25.js.map