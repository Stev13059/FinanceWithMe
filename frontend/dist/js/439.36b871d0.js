"use strict";(self["webpackChunkfinance_with_me"]=self["webpackChunkfinance_with_me"]||[]).push([[439],{78439:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"groups"},[t("div",{staticClass:"groups_top"},[t("div",{staticClass:"topLeft"},[t("a-form",{attrs:{"label-col":{span:8},"wrapper-col":{span:15}}},[t("a-form-item",{attrs:{label:"Group Name : "}},[t("a-input",{attrs:{allowClear:""},on:{input:e.onInput},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1)],1),t("a-button",{staticStyle:{"margin-Top":"5px"},on:{click:e.searchGroup}},[e._v("Search")])],1),t("a-button",{staticStyle:{"margin-top":"5px",width:"85px"},attrs:{type:"primary"},on:{click:function(t){e.visibleAdd=!0}}},[e._v("Create")]),t("a-button",{staticStyle:{"margin-top":"5px",width:"85px","margin-left":"10px"},attrs:{type:"default"},on:{click:function(t){e.visibleJoin=!0}}},[e._v("Join")])],1),t("a-table",{attrs:{loading:e.loading,bordered:"",columns:e.columns,"data-source":e.data,pagination:e.pagination,rowKey:(e,t)=>t},scopedSlots:e._u([{key:"Operation",fn:function(a){return t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.disbandGroup(a.id)}}},[e._v("Disband")]),t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.exitGroup(a.id)}}},[e._v("Exit")]),t("a-button",{on:{click:function(t){return e.inviteUser(a)}}},[e._v("Invite")]),t("a-button",{attrs:{loading:e.userLoading&&e.selectGroup.id==a.id},on:{click:function(t){return e.showUsers(a)}}},[e._v("Users")])],1)}}])}),t("a-modal",{attrs:{title:"Create a group",confirmLoading:e.addLoading},on:{ok:e.onConfirmAdd,cancel:e.onClose},model:{value:e.visibleAdd,callback:function(t){e.visibleAdd=t},expression:"visibleAdd"}},[t("a-form",{attrs:{form:e.formAdd,"label-col":{span:6},"wrapper-col":{span:12}}},[t("a-form-item",{attrs:{label:"Group Name"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupName",{rules:[{required:!0,message:"Please input groupName!"}]}],expression:"['groupName', { rules: [{ required: true, message: 'Please input groupName!' }] }]"}],attrs:{placeholder:"Please enter group name!"}})],1)],1)],1),t("a-modal",{attrs:{title:"Join Group",confirmLoading:e.joinLoading},on:{ok:e.onConfirmSelect,cancel:function(t){return e.formJoin.resetFields()}},model:{value:e.visibleJoin,callback:function(t){e.visibleJoin=t},expression:"visibleJoin"}},[t("a-form",{attrs:{form:e.formJoin,"label-col":{span:4},"wrapper-col":{span:18}}},[t("a-form-item",{attrs:{label:"Group Id"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!0,message:"Please input groupId!"}]}],expression:"['id', { rules: [{ required: true, message: 'Please input groupId!' }] }]"}],attrs:{placeholder:"Please enter group id!"}})],1)],1)],1),t("a-modal",{attrs:{title:"View Group Id",footer:!1},model:{value:e.visibleView,callback:function(t){e.visibleView=t},expression:"visibleView"}},[t("span",[e._v("The group ID is "),t("b",{staticStyle:{cursor:"pointer",color:"#1890ff"},on:{click:function(t){return e.copyText(e.selectGroup.id)}}},[e._v(e._s(e.selectGroup.id))])])]),t("a-modal",{attrs:{title:"Group Users",footer:!1},model:{value:e.visibleUsers,callback:function(t){e.visibleUsers=t},expression:"visibleUsers"}},[t("span",[e._v("users: "+e._s(e.groupUsers.join(","))+" ")])])],1)},r=[],i=(a(98992),a(54520),a(81454),a(6698));const o=[{title:"Num",dataIndex:"_num",align:"center",width:180},{title:"Group Name",dataIndex:"groupName",align:"center"},{title:"Date",dataIndex:"createTime",align:"center"},{title:"Operation",align:"center",width:400,scopedSlots:{customRender:"Operation"}}];var n={name:"GroupsPage",data(){return{loading:!1,addLoading:!1,joinLoading:!1,userLoading:!1,resData:[],data:[],columns:o,visibleAdd:!1,formAdd:this.$form.createForm(this,{name:"coordinated"}),formJoin:this.$form.createForm(this,{name:"coordinated"}),visibleView:!1,visibleJoin:!1,visibleUsers:!1,searchParams:"",pagination:{total:0,current:1,pageSize:10,pageSizeOptions:["10","20","30","50"],showTotal:e=>`total ${e}`,showSizeChanger:!0,onChange:this.change},selectGroup:{},groupUsers:[]}},mounted(){this.getBaseList()},methods:{onInput(){this.searchParams||this.getBaseList()},change(e){this.pagination.current=e,console.log(111)},getBaseList(){this.loading=!0,(0,i.Qs)().then((e=>{this.data=e.data.map(((e,t)=>{const a=new Date(e.createTime),s=a.getDate(),r=a.getMonth()+1,i=a.getFullYear();return{...e,_num:t+1,createTime:`${s}/${r}/${i}`}})),this.resData=[...this.data],this.pagination.total=e.data.length})).finally((()=>{this.loading=!1}))},changePage(e){Object.assign(this.pagination,e)},disbandGroup(e){this.$confirm({title:"Do you want to delete this group?",content:"Cannot be restored after deletion",onOk:()=>{(0,i.dq)({id:e}).then((()=>{this.$message.success("Deleting group for success！"),this.getBaseList()})).finally((()=>{}))},onCancel(){}})},exitGroup(e){this.$confirm({title:"Do you want to exit this group?",content:"Cannot be restored after exiting",onOk:()=>{(0,i.qx)({id:e}).then((()=>{this.$message.success("Exit success！"),this.getBaseList()})).finally((()=>{}))},onCancel(){}})},onConfirmAdd(){this.formAdd.validateFields(((e,t)=>{e||(this.addLoading=!0,(0,i.$3)(t).then((()=>{this.$message.success("Added group successfully"),this.visibleAdd=!1,this.getBaseList()})).finally((()=>{this.addLoading=!1})))}))},onClose(){this.formAdd.resetFields(),this.visibleAdd=!1},inviteUser(e){this.selectGroup=e,this.visibleView=!0},showUsers(e){this.userLoading=!0,this.selectGroup=e,(0,i.J6)({groupId:e.id}).then((e=>{this.groupUsers=e.data,this.visibleUsers=!0})).finally((()=>{this.userLoading=!1}))},onConfirmSelect(){this.formJoin.validateFields(((e,t)=>{e||(this.joinLoading=!0,(0,i.sE)({id:t.id}).then((()=>{this.$message.success("Join Success"),this.visibleJoin=!1,this.formJoin.resetFields(),this.getBaseList()})).finally((()=>{this.joinLoading=!1})))}))},searchGroup(){this.data=this.resData.filter((e=>e.groupName.indexOf(this.searchParams)>-1)),this.pagination.total=this.data.length},copyText(e){if(!e)return void alert("Group Id does not exist");const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$message.success("Group Id copied")}}},l=n,u=a(81656),d=(0,u.A)(l,s,r,!1,null,"4bf61e61",null),c=d.exports},6698:function(e,t,a){a.d(t,{vs:function(){return S},m5:function(){return O},Gh:function(){return P},$3:function(){return T},sE:function(){return w},dq:function(){return x},qx:function(){return G},Qs:function(){return v},J6:function(){return y},Gq:function(){return l},GP:function(){return u},Js:function(){return b},fL:function(){return f},yX:function(){return g},c_:function(){return h},Nz:function(){return c},BZ:function(){return m},OK:function(){return p},aM:function(){return d}});a(81454);var s=a(25257);const r={headers:{"Content-Type":"application/json;charset=utf-8"},baseURL:"https://financewithme.azurewebsites.net/api",code:"WePrywqwpoUEGrZA0UTEUvfqibt8H0QmOhBDmHzVbySFAzFu4V2R3w=="},i=e=>(e.response&&s.A.error(e.response.statusText||"The server is busy, please try again later."),e.statusText&&s.A.error(e.statusText||"The server is busy, please try again later."),Promise.reject(e)),o=e=>{const t={...e};if(t.url=`${r.baseURL}${e.url}`,-1==t.url.indexOf("/user/login")&&-1==t.url.indexOf("/user/register")){const t=localStorage.getItem("userId");t&&(e.params?Object.assign(e.params,{userId:t}):e.params={userId:t})}return e.params&&("GET"===e.method.toUpperCase()?t.url=`${t.url}?${Object.keys(e.params).map((t=>`${t}=${e.params[t]}`)).join("&")}`:"POST"===e.method.toUpperCase()&&(t.body=JSON.stringify(e.params)),delete t.params),t.url=t.url.indexOf("?")>-1?`${t.url}&code=${r.code}`:`${t.url}?code=${r.code}`,t},n=async(e,t={})=>{const a=o({...r,...t,url:e}),n=await fetch(a.url,{...a});if(n.ok){const e=await n.json();return e.result||0==e.code?Promise.resolve(e):(s.A.error(e.msg||"error"),Promise.reject())}return await i(n)},l=(e,t)=>n("/user/login",{method:"GET",params:e,...t}),u=(e,t)=>n("/user/register",{method:"POST",params:e,...t}),d=(e,t)=>n("/transaction/list",{method:"GET",params:e,...t}),c=(e,t)=>n("/transaction/add",{method:"POST",params:e,...t}),p=(e,t)=>n("/transaction/edit",{method:"POST",params:e,...t}),m=(e,t)=>n("/transaction/delete",{method:"POST",params:e,...t}),h=(e,t)=>n("/goals/list",{method:"GET",params:e,...t}),g=(e,t)=>n("/goals/edit",{method:"POST",params:e,...t}),f=(e,t)=>n("/goals/delete",{method:"POST",params:e,...t}),b=(e,t)=>n("/goals/add",{method:"POST",params:e,...t}),v=(e,t)=>n("/group/list",{method:"GET",params:e,...t}),y=(e,t)=>n("/group/userList",{method:"GET",params:e,...t}),x=(e,t)=>n("/group/disband",{method:"POST",params:e,...t}),w=(e,t)=>n("/group/addUser",{method:"POST",params:e,...t}),T=(e,t)=>n("/group/add",{method:"POST",params:e,...t}),G=(e,t)=>n("/group/exit",{method:"POST",params:e,...t}),P=(e,t)=>n("/analytics/total",{method:"GET",params:e,...t}),S=(e,t)=>n("/analytics/exchangeRate",{method:"GET",params:e,...t}),O=(e,t)=>n("/analytics/proportion",{method:"get",params:e,...t})}}]);
//# sourceMappingURL=439.36b871d0.js.map